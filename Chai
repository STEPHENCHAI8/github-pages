<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deriv Digit Matches Bot</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
    h1 { color: #333; }
    input, button { padding: 10px; margin: 5px; }
    #log { background: #fff; padding: 10px; border: 1px solid #ccc; height: 200px; overflow-y: scroll; }
  </style>
</head>
<body>
  <h1>Deriv Digit Matches Bot</h1>
  <div>
    <label>Stake: <input type="number" id="stake" value="1" /></label>
    <label>Sample Size: <input type="number" id="sampleSize" value="20" /></label>
    <button onclick="startBot()">Start Bot</button>
    <button onclick="stopBot()">Stop Bot</button>
  </div>
  <div id="log"></div>  <script>
    let ws, ticks = [], running = false;

    function log(msg) {
      const logEl = document.getElementById("log");
      logEl.innerHTML += msg + "<br>";
      logEl.scrollTop = logEl.scrollHeight;
    }

    function connect() {
      ws = new WebSocket("wss://ws.binaryws.com/websockets/v3?app_id=1089");
      ws.onopen = () => {
        log("Connected to Deriv API");
        ws.send(JSON.stringify({ ticks: "R_100" }));
      };

      ws.onmessage = (msg) => {
        const data = JSON.parse(msg.data);
        if (data.tick) {
          const digit = parseInt(data.tick.quote.toString().slice(-1));
          ticks.push(digit);
          if (ticks.length > parseInt(document.getElementById("sampleSize").value)) {
            ticks.shift();
          }
          if (running) {
            tradeBestDigit();
          }
        }
      };
    }

    function getLeastFrequentDigit() {
      const counts = Array(
